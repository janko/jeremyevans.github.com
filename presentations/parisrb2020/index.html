<!DOCTYPE html>

<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Running a Government Department on Ruby for over 13 Years</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" />
  <link type="text/css" href="./css/tipsy.css" rel="stylesheet" />

  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

    <style type="text/css">
      @media screen {
        #preso, .slide {
          width: 1920px;
          height: 1080px;
        }
        #footer { width: 1901px; }
      }
    </style>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>
  <script type="text/javascript" src="./js/jquery.parsequery.min.js"></script>
  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>
  <script type="text/javascript" src="./js/jquery.tipsy.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

      <script type="text/javascript" src="./js/sh_lang/sh_php.min.js"></script>
      <script type="text/javascript" src="./js/sh_lang/sh_symbol.min.js"></script>
      <script type="text/javascript" src="./js/sh_lang/sh_ruby.min.js"></script>

    <link rel="stylesheet" href="./file/fonts.css" type="text/css"/>
    <link rel="stylesheet" href="./file/something.css" type="text/css"/>


  <script type="text/javascript">
  $(function(){
      if(!('slaveWindow' in window) && window.name !== 'toolbar' && $(window).width() < $(document).width()) {
        no_resize = true;
        $('body').css("zoom", ""+($(window).width()*100.0)/$(document).width()+"%");
        $('body').css("overflow-y", "auto");
        $('body').css("overflow-x", "hidden");
        $('#notesInfo').css("font-size", ""+$(document).width()*14.0/$(window).width()+"px");
        $('#notesInfo').css("line-height", ""+$(document).width()*20.0/$(window).width()+"px");
      }
      setupPreso(false, '.');
  });
  </script>

</head>

<body>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso"><center>loading presentation...</center></div>
<div id="footer">
  <span id="notesInfo"></span>
  <img id="disconnected" src="/css/disconnected.png" />
</div>

<div id="slides" class="offscreen" style="display:none;">
<div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/1">

<div class="notes">
<p>Bonjour (Good morning)! Today I will be speaking about my experiences using Sequel and Roda to run a small government department, as well as what led us to adopt Ruby and these libraries.</p>
</div>
<div class="bg-capitol">&#xA0;</div><h1 class="white" style="font-size: 150px; position: absolute; top: 75px; left: 30px;">Running a Government</h1><h1 class="white" style="font-size: 150px; position: absolute; top: 210px; left: 75px;">Department</h1><h1 class="white" style="font-size: 150px; position: absolute; top: 353px; left: 105px;">with <u>Sequel</u> and <u>Roda</u>
</h1><h1 class="blue" style="font-size: 135px; position: absolute; top: 765px; right: 113px; text-align: right;">Paris<span style="color: red">RB</span> Conf 2020</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/2">

<div class="notes">
<p>My name is Jeremy Evans, and I have been using Ruby since 2004.</p>
</div>

<p><img class="profile-pic" src="./file/jeremy.jpg" style="position: absolute; top: 240px; left: 120px;"/>
<h1 class="red" style="font-size: 90px; position: absolute; top: 540px; left: 750px;">GitHub: <span class="blue mono">jeremyevans</span>
</h1><h1 class="red" style="font-size: 90px; position: absolute; top: 615px; left: 750px;">Twitter: <span class="blue mono">@jeremyevans0</span>
</h1></p>
</div>
</div><div id="slides/slides" class="slide bg-blue" data-transition="none"><div class="content bg-blue" ref="slides/slides/3">

<div class="notes">
<p>I work for the California State Auditor. Our office is in the Sacramento, California, in the United States.|We perform independent evaluations of other government departments, and produce reports with recommendations to improve government.</p>
</div>

<p><img src="./file/csa.svg" style="position: absolute; top: 15px; left: 480px; width: 1050px; height: 1050px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide bg-blue" data-transition="none"><div class="content bg-blue" ref="slides/slides/4">

<div class="notes">
<p>Our equivalent at the national level here in France would be the Cour des Comptes (Court of Accounts).</p>
</div>

<p><img src="./file/court-of-accounts.svg" style="position: absolute; top: 360px; left: -195px; width: 2070px; height: 300px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/5">

<div class="notes">
<p>Our department&#x2019;s software development approach differs from many other government departments.</p>
</div>
<h1 class="red" style="font-size: 240px; position: absolute; top: 30px; left: 203px;">Development</h1><h1 class="blue" style="font-size: 240px; position: absolute; top: 233px; left: 83px;">Approach</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/6">

<div class="notes">
<p>We build all of our custom software internally using government staff, with no use of contractors.</p>
</div>
<h1 class="red" style="font-size: 240px; position: absolute; top: 30px; left: 203px;">Development</h1><h1 class="blue" style="font-size: 150px; position: absolute; top: 252px; left: 893px;">by</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 338px; left: 533px;">Employees</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/7">

<div class="notes">
<p>All of our internal custom software development is done in Ruby. Ruby has been our primary development language for new projects since 2005, and all of our existing internal custom systems were converted to Ruby by 2009.</p>
</div>
<h1 class="red" style="font-size: 240px; position: absolute; top: 30px; left: 203px;">Development</h1><h1 class="blue" style="font-size: 150px; position: absolute; top: 252px; left: 923px;">in</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 323px; left: 773px;">Ruby</h1>
<p><img src="./file/ruby.svg" style="position: absolute; top: 330px; left: 0; width: 960px; height: 720px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/8">

<div class="notes">
<p>All of our SQL database access uses Sequel. We use PostgreSQL for our custom software development, and also have to interface with Microsoft SQL Server databases. Occassionally, we&#x2019;ve had to access other databases, such as Oracle and Microsoft Access. Thankfully, Sequel ships with support for all of the databases we have needed to use.</p>
</div>
<h1 class="red" style="font-size: 240px; position: absolute; top: 30px; left: 203px;">Development</h1><h1 class="blue" style="font-size: 150px; position: absolute; top: 237px; left: 668px;">with</h1>
<p><img src="./file/ruby-sequel.png" style="width: 600px; height: 225px; position: absolute; top: 300px; left: 405px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/9">

<div class="notes">
<p>Most of our software development is delivered as web applications, and for those we have used Roda since 2014.</p>
</div>
<h1 class="red" style="font-size: 240px; position: absolute; top: 30px; left: 203px;">Development</h1><h1 class="blue" style="font-size: 150px; position: absolute; top: 237px; left: 668px;">with</h1>
<p><img src="./file/roda-logo.svg" style="width: 600px; height: 210px; position: absolute; top: 360px; left: 600px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/10">

<div class="notes">
<p>Let me discuss some of the web applications that we develop.</p>
</div>
<h1 class="blue" style="font-size: 180px; position: absolute; top: 150px; left: 203px;">Web</h1><h1 class="red" style="font-size: 270px; position: absolute; top: 225px; left: 75px;">Applications</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/11">

<div class="notes">
<p>Our largest application is our intranet site, called The Hub. The majority of our development is adding new features to The Hub.|The Hub has some pretty standard intranet features. It contains a lot of information on internal processes, has our comprehensive manual and our employee directory.</p>
</div>
<h1 class="red" style="font-size: 180px; position: absolute; top: 300px; left: 953px;">The</h1><h1 class="blue" style="font-size: 270px; position: absolute; top: 420px; left: 900px;">Hub</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/12">

<div class="notes">
<p>Each employee has a profile page showing information about the employee, such as their division and position, audits they have worked on, audits they are currently working on, any awards they have received.</p>
</div>
<h1 class="red" style="font-size: 270px; position: absolute; top: 450px; left: 353px;">Profile</h1><h1 class="blue" style="font-size: 120px; position: absolute; top: 660px; left: 450px;">Pages</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/13">

<div class="notes">
<p>The employee&#x2019;s profile page also has a link to a map of the floor that they work on, with their desk location highlighted. This makes it easy for new staff to navigate the office, and for existing staff to easily find new staff.</p>
</div>
<h1 class="red" style="font-size: 270px; position: absolute; top: 150px; left: 207px;">Floor</h1><h1 class="blue" style="font-size: 210px; position: absolute; top: 323px; left: 300px;">Layouts</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/14">

<div class="notes">
<p>Most of the new development centers around automating existing processes. When I started working for the department in 2000, almost all processes were manual, paper-based processes. Now, most of the common processes are automated via online forms.|For example, submitting requests to take time off, attend training, get reimbursed for overtime, modify facilities, purchase supplies and equipment, and many others are automated. Records are kept so employees can see the status of all previous requests.</p>
</div>
<h1 class="red" style="font-size: 240px; position: absolute; top: 300px; left: 503px;">Focus</h1><h1 class="blue" style="font-size: 150px; position: absolute; top: 473px; left: 623px;">on</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 525px; left: 503px;">Automation</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/15">

<div class="notes">
<p>Most of the processes have custom review/approval workflows based on different requirements. Some processes will only require supervisory review. In other cases, there will be between two and five levels of review, with the number of levels dependent on the request and the employee&#x2019;s position.</p>
</div>
<h1 class="red" style="font-size: 240px; position: absolute; top: 150px; left: 203px;">Process</h1><h1 class="blue" style="font-size: 150px; position: absolute; top: 368px; left: 203px;">Dependent</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 480px; left: 203px;">Review</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/16">

<div class="notes">
<p>Another web application that we develop is our recruiting system, which is split into two parts, a publicly accessible system used by applicants, and an internal system used by human resources staff. Most of the employees that we hire are entry level auditors directly out of university, and most of the recruiting system is designed to handle the recruiting process for these applicants.</p>
</div>
<h1 class="blue" style="font-size: 270px; position: absolute; top: 450px; left: 503px;">Recruiting</h1><h1 class="red" style="font-size: 180px; position: absolute; top: 675px; left: 1103px;">System</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/17">

<div class="notes">
<p>The recruiting system allows prospective auditors to apply to take our online exam. After applying, our human resources staff review the application, and if they approve it, the applicant is notified and can take our online exam.</p>
</div>
<h1 class="blue" style="font-size: 120px; position: absolute; top: 450px; left: 225px;">Online</h1><h1 class="red" style="font-size: 300px; position: absolute; top: 465px; left: 53px;">Application</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/18">

<div class="notes">
<p>The online exam is timed and has 75 muliple choice questions. You have to get about 80% of the questions correct to rank highly enough to advance.</p>
</div>
<h1 class="blue" style="font-size: 120px; position: absolute; top: 450px; left: 225px;">Online</h1><h1 class="red" style="font-size: 300px; position: absolute; top: 465px; left: 53px;">Exam</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/19">

<div class="notes">
<p>Assuming the applicant scores highly enough, they are notified they can advance further and can take our online writing assessment. When the applicant begins the writing assessment, they are given a prompt and an upload form, and they have two hours to upload a writing sample similar in style to our audit reports. This writing assessment is graded by our staff.</p>
</div>
<h1 class="blue" style="font-size: 120px; position: absolute; top: 450px; left: 225px;">Online</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 300px; left: 578px;">Writing</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 510px; left: 578px;">Assessment</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/20">

<div class="notes">
<p>If the applicant passes the writing assessment, there is a phone interview and then an in-house interview, and the system handles the information related to those. The system also handles all internal workflows related to processing these applications, and has extensive reporting capabilities. There are also smaller subsystems of the recruiting system that handle the recruiting process for more advanced auditing positions.</p>
</div>
<h1 class="red" style="font-size: 120px; position: absolute; top: 150px; left: 300px;">Final</h1><h1 class="blue" style="font-size: 300px; position: absolute; top: 165px; left: 53px;">Stages</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/21">

<div class="notes">
<p>Another major web application we develop is our recommendations system. One of our department&#x2019;s primary functions is to make recommendations to improve government. The departments we audit are required to respond to our recommendations on a regular basis on their progress implementing our recommendations, until the recommendations have been fully implemented.</p>
</div>
<h1 class="blue" style="font-size: 210px; position: absolute; top: 510px; left: 53px;">Recommendations</h1><h1 class="red" style="font-size: 180px; position: absolute; top: 675px; left: 1103px;">System</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/22">

<div class="notes">
<p>The recommendations system is split into three parts. The first part is externally accessible and allows other government departments to respond to our recommendations. The second part is internal and allows our staff to add recommendations, and to review responses to the recommendations.</p>
</div>
<h1 class="blue" style="font-size: 480px; position: absolute; top: 240px; left: 338px;">3</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 450px; left: 653px;">Parts</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/23">

<div class="notes">
<p>Each response goes through four levels of review, and after being fully reviewed, the department&#x2019;s response and our assessment of their response is posted on our website.|This holds departments accountable, and their implementations of our recommendations are often considered when the legislature reviews the department&#x2019;s budget. We continue to follow up on recommendations we make to departments for up to 6 years after the release of our audit report.</p>
</div>
<h1 class="blue" style="font-size: 180px; position: absolute; top: 210px; left: 323px;">Increase</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 300px; left: 203px;">Accountability</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/24">

<div class="notes">
<p>The third part of the recommendations system is externally accessible and allows the legislature, press, and public to subscribe to be notified about new report releases and new responses to our recommendations. This system allows subscribing to receive notifications filtered to specific policy areas.</p>
</div>
<h1 class="blue" style="font-size: 180px; position: absolute; top: 210px; left: 323px;">Increase</h1><h1 class="red" style="font-size: 360px; position: absolute; top: 270px; left: 45px;">Oversight</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/25">

<div class="notes">
<p>So how did we start using Ruby, and end up using Sequel and Roda? When I was first given the task of maintaining our websites back in 2003, they were developed as static pages using Net Objects Fusion. While I had no previous professional programming experience,</p>
</div>
<h1 class="blue" style="font-size: 180px; position: absolute; top: 585px; left: 315px;">In the</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 705px; left: 75px;">Beginning...</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/26">

<div class="notes">
<p>I did have some exposure to PHP, and I decided to use that.</p>
</div>
<h1 class="blue" style="font-size: 180px; position: absolute; top: 585px; left: 315px;">In the</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 705px; left: 75px;">Beginning...</h1>
<p><img src="./file/php.svg" style="position: absolute; top: 765px; right: 38px; height: 233px; width: 426px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/27">

<div class="notes">
<p>I do not have a copy of the PHP code we used to use, but it was something like this.</p>
</div>
<pre class="sh_php" style="font-size: 60px; margin-top: 60px;"><code>&lt;? include 'shared.php' ?&gt;&lt;html&gt;
&lt;head&gt;...&lt;/head&gt;
&lt;body&gt;
&lt;? $sql = 'SELECT * FROM table WHERE field = ' .
           $db-&gt;qstr($param) ?&gt;
&lt;? $rs = $db-&gt;Execute($sql) ?&gt;
&lt;? while (!$rs-&gt;EOF) { ?&gt;
  Name: &lt;?= $rs-&gt;fields[1] ?&gt;
&lt;? } ?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/28">

<div class="notes">
<p>At the top of every PHP file, we&#x2019;d include a library with the shared code. This would establish a database connection and store it in the db variable.</p>
</div>
<pre class="sh_php" style="font-size: 60px; margin-top: 60px;"><code>&lt;? <b>include 'shared.php'</b> ?&gt;&lt;html&gt;
&lt;head&gt;...&lt;/head&gt;
&lt;body&gt;
&lt;? $sql = 'SELECT * FROM table WHERE field = ' .
           $db-&gt;qstr($param) ?&gt;
&lt;? $rs = $db-&gt;Execute($sql) ?&gt;
&lt;? while (!$rs-&gt;EOF) { ?&gt;
  Name: &lt;?= $rs-&gt;fields[1] ?&gt;
&lt;? } ?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/29">

<div class="notes">
<p>All SQL statements were written manually.</p>
</div>
<pre class="sh_php" style="font-size: 60px; margin-top: 60px;"><code>&lt;? include 'shared.php' ?&gt;&lt;html&gt;
&lt;head&gt;...&lt;/head&gt;
&lt;body&gt;
&lt;? <b>$sql = 'SELECT * FROM table WHERE field = ' .</b>
           $db-&gt;qstr($param) ?&gt;
&lt;? $rs = $db-&gt;Execute($sql) ?&gt;
&lt;? while (!$rs-&gt;EOF) { ?&gt;
  Name: &lt;?= $rs-&gt;fields[1] ?&gt;
&lt;? } ?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/30">

<div class="notes">
<p>All values used in the SQL had to be escaped and interpolated into the SQL manually.</p>
</div>
<pre class="sh_php" style="font-size: 60px; margin-top: 60px;"><code>&lt;? include 'shared.php' ?&gt;&lt;html&gt;
&lt;head&gt;...&lt;/head&gt;
&lt;body&gt;
&lt;? $sql = 'SELECT * FROM table WHERE field = ' .
           <b>$db-&gt;qstr($param)</b> ?&gt;
&lt;? $rs = $db-&gt;Execute($sql) ?&gt;
&lt;? while (!$rs-&gt;EOF) { ?&gt;
  Name: &lt;?= $rs-&gt;fields[1] ?&gt;
&lt;? } ?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/31">

<div class="notes">
<p>To access data returned from the database, you would index into an array, you could not access the data by column name.</p>
</div>
<pre class="sh_php" style="font-size: 60px; margin-top: 60px;"><code>&lt;? include 'shared.php' ?&gt;&lt;html&gt;
&lt;head&gt;...&lt;/head&gt;
&lt;body&gt;
&lt;? $sql = 'SELECT * FROM table WHERE field = ' .
           $db-&gt;qstr($param) ?&gt;
&lt;? $rs = $db-&gt;Execute($sql) ?&gt;
&lt;? while (!$rs-&gt;EOF) { ?&gt;
  Name: &lt;?= <b>$rs-&gt;fields[1]</b> ?&gt;
&lt;? } ?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/32">

<div class="notes">
<p>In late 2004, I heard about Rails, and tried it out. I saw that it was a great improvement over PHP.</p>
</div>

<p><img src="./file/rails-logo.svg" style="width: 1200px; height: 900px; position: absolute; top: 150px; left: 300px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/33">

<div class="notes">
<p>Using Rails, the previous PHP code turned into much nicer ERB code, something like this.</p>
</div>
<pre class="sh_sourceCode" style="font-size: 60px; margin-top: 60px;"><code><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;...&lt;/</span>head<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;%</span> Table<span class="sh_symbol">.</span>find<span class="sh_symbol">(:</span>conditions <span class="sh_symbol">=&gt;</span>
              <span class="sh_symbol">[</span><span class="sh_string">'field = ?'</span><span class="sh_symbol">,</span> params<span class="sh_symbol">[</span><span class="sh_string">'param'</span><span class="sh_symbol">]]).</span>
     each <span class="sh_keyword">do</span> <span class="sh_symbol">|</span>row<span class="sh_symbol">|</span> <span class="sh_symbol">%&gt;</span>
  Name: <span class="sh_symbol">&lt;%=</span> row<span class="sh_symbol">.</span>name <span class="sh_symbol">%&gt;</span>
<span class="sh_symbol">&lt;%</span> <span class="sh_keyword">end</span> <span class="sh_symbol">%&gt;</span>
<span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span>
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/34">

<div class="notes">
<p>Rails takes care of most of the SQL creation, except for this fragment.</p>
</div>
<pre class="sh_sourceCode" style="font-size: 60px; margin-top: 60px;"><code><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;...&lt;/</span>head<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;%</span> Table<span class="sh_symbol">.</span>find<span class="sh_symbol">(:</span>conditions <span class="sh_symbol">=&gt;</span>
              <span class="sh_symbol">[</span><span class="sh_string"><b>'field = ?'</b></span><span class="sh_symbol">,</span> params<span class="sh_symbol">[</span><span class="sh_string">'param'</span><span class="sh_symbol">]]).</span>
     each <span class="sh_keyword">do</span> <span class="sh_symbol">|</span>row<span class="sh_symbol">|</span> <span class="sh_symbol">%&gt;</span>
  Name: <span class="sh_symbol">&lt;%=</span> row<span class="sh_symbol">.</span>name <span class="sh_symbol">%&gt;</span>
<span class="sh_symbol">&lt;%</span> <span class="sh_keyword">end</span> <span class="sh_symbol">%&gt;</span>
<span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span>
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/35">

<div class="notes">
<p>It escapes and interpolates the submitted parameter into the SQL.</p>
</div>
<pre class="sh_sourceCode" style="font-size: 60px; margin-top: 60px;"><code><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;...&lt;/</span>head<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;%</span> Table<span class="sh_symbol">.</span>find<span class="sh_symbol">(:</span>conditions <span class="sh_symbol">=&gt;</span>
              <span class="sh_symbol">[</span><span class="sh_string">'field = <b>?</b>'</span><span class="sh_symbol">,</span> <b>params<span class="sh_symbol">[</span><span class="sh_string">'param'</span><span class="sh_symbol">]</span></b><span class="sh_symbol">]).</span>
     each <span class="sh_keyword">do</span> <span class="sh_symbol">|</span>row<span class="sh_symbol">|</span> <span class="sh_symbol">%&gt;</span>
  Name: <span class="sh_symbol">&lt;%=</span> row<span class="sh_symbol">.</span>name <span class="sh_symbol">%&gt;</span>
<span class="sh_symbol">&lt;%</span> <span class="sh_keyword">end</span> <span class="sh_symbol">%&gt;</span>
<span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span>
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/36">

<div class="notes">
<p>It allows for getting the returned attribute by calling a method using the column name.</p>
</div>
<pre class="sh_sourceCode" style="font-size: 60px; margin-top: 60px;"><code><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;...&lt;/</span>head<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;%</span> Table<span class="sh_symbol">.</span>find<span class="sh_symbol">(:</span>conditions <span class="sh_symbol">=&gt;</span>
              <span class="sh_symbol">[</span><span class="sh_string">'field = ?'</span><span class="sh_symbol">,</span> params<span class="sh_symbol">[</span><span class="sh_string">'param'</span><span class="sh_symbol">]]).</span>
     each <span class="sh_keyword">do</span> <span class="sh_symbol">|</span>row<span class="sh_symbol">|</span> <span class="sh_symbol">%&gt;</span>
  Name: <span class="sh_symbol">&lt;%=</span> <b>row<span class="sh_symbol">.</span>name</b> <span class="sh_symbol">%&gt;</span>
<span class="sh_symbol">&lt;%</span> <span class="sh_keyword">end</span> <span class="sh_symbol">%&gt;</span>
<span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span>
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/37">

<div class="notes">
<p>After a few months of using Rails in personal projects and a few more testing it at work, I switched our intranet site from PHP to Rails in the summer of 2005.|I was pretty happy working with Rails for a few years, as it made things so much easier than PHP.</p>
</div>

<p><img src="./file/rails-logo.svg" style="width: 1200px; height: 900px; position: absolute; top: 150px; left: 300px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/38">

<div class="notes">
<p>After being exposed to Sequel in 2008, I saw the benefits of Sequel&#x2019;s method chaining approach to building queries. I converted all ActiveRecord usage to Sequel that year, and we have been using Sequel exclusively since.</p>
</div>

<p><img src="./file/ruby-sequel.png" style="width: 600px; height: 225px; position: absolute; top: 450px; left: 600px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/39">

<div class="notes">
<p>Here&#x2019;s some example ActiveRecord code before the upgrade. This is around the time of Rails 2.0. This code searches for paper forms, which used to be a common need before we started automating processes.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>conditions = [
  'forms.number ILIKE ? AND forms.title ILIKE ?',
  "%#{params['number']}%",
  "%#{params['title']}%"
]

if params['category'].to_i &gt; 0
  conditions[0] &lt;&lt; " AND formcategories.formcategoryid = ?"
  conditions &lt;&lt; params['category'].to_i
  joins = "LEFT JOIN formcategories ON formid = forms.id"
end

@forms = Form.find(:all, :joins=&gt;joins,
  :conditions=&gt;conditions, :order=&gt;'filename')
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/40">

<div class="notes">
<p>ActiveRecord did not and I believe still does not have public API support for case insensitive searching, so you had to manually use database-specific SQL.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>conditions = [
<b class="block">  'forms.number ILIKE ? AND forms.title ILIKE ?',
  "%#{params['number']}%",
  "%#{params['title']}%"</b>
]

if params['category'].to_i &gt; 0
  conditions[0] &lt;&lt; " AND formcategories.formcategoryid = ?"
  conditions &lt;&lt; params['category'].to_i
  joins = "LEFT JOIN formcategories ON formid = forms.id"
end

@forms = Form.find(:all, :joins=&gt;joins,
  :conditions=&gt;conditions, :order=&gt;'filename')
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/41">

<div class="notes">
<p>Back then in ActiveRecord, you had to pass a hash of values to find.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>conditions = [
  'forms.number ILIKE ? AND forms.title ILIKE ?',
  "%#{params['number']}%",
  "%#{params['title']}%"
]

if params['category'].to_i &gt; 0
  conditions[0] &lt;&lt; " AND formcategories.formcategoryid = ?"
  conditions &lt;&lt; params['category'].to_i
  joins = "LEFT JOIN formcategories ON formid = forms.id"
end

<b class="block">@forms = Form.find(:all, :joins=&gt;joins,
  :conditions=&gt;conditions, :order=&gt;'filename')</b>
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/42">

<div class="notes">
<p>You generally provided the filter conditions as an array with an SQL fragment and interpolated variables.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code><b class="block">conditions = [
  'forms.number ILIKE ? AND forms.title ILIKE ?',
  "%#{params['number']}%",
  "%#{params['title']}%"
]</b>

if params['category'].to_i &gt; 0
  conditions[0] &lt;&lt; " AND formcategories.formcategoryid = ?"
  conditions &lt;&lt; params['category'].to_i
  joins = "LEFT JOIN formcategories ON formid = forms.id"
end

@forms = Form.find(:all, :joins=&gt;joins,
  :conditions=&gt;<b>conditions</b>, :order=&gt;'filename')
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/43">

<div class="notes">
<p>In cases where the filter conditions needed to be modified depending on the submitted parameters, you had to append to the first element of the conditions array to modify the SQL fragment.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>conditions = [
  'forms.number ILIKE ? AND forms.title ILIKE ?',
  "%#{params['number']}%",
  "%#{params['title']}%"
]

if params['category'].to_i &gt; 0
  <b>conditions[0] &lt;&lt; " AND formcategories.formcategoryid = ?"</b>
  conditions &lt;&lt; params['category'].to_i
  joins = "LEFT JOIN formcategories ON formid = forms.id"
end

@forms = Form.find(:all, :joins=&gt;joins,
  :conditions=&gt;conditions, :order=&gt;'filename')
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/44">

<div class="notes">
<p>You also had to append to the conditions array for each interpolated variable added to the SQL fragment.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>conditions = [
  'forms.number ILIKE ? AND forms.title ILIKE ?',
  "%#{params['number']}%",
  "%#{params['title']}%"
]

if params['category'].to_i &gt; 0
  conditions[0] &lt;&lt; " AND formcategories.formcategoryid = <b>?</b>"
  <b>conditions &lt;&lt; params['category'].to_i</b>
  joins = "LEFT JOIN formcategories ON formid = forms.id"
end

@forms = Form.find(:all, :joins=&gt;joins,
  :conditions=&gt;conditions, :order=&gt;'filename')
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/45">

<div class="notes">
<p>With Sequel, this got much simpler.</p>
</div>
<pre class="sh_ruby" style="font-size: 53px; margin-top: 60px;"><code>ds = filter(:number.ilike("%#{params['number']}%") &amp;
            :title.ilike("%#{params['title']}%"))

if params['category'].to_i &gt; 0
  ds = ds.select(:forms.<i>*</i>).
          inner_join(:formcategories, :formid=&gt;:id,
            :formcategoryid=&gt;params['category'].to_i)
end

@forms = ds.order(:filename).all
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/46">

<div class="notes">
<p>Sequel even back in 2008 had built in support for case insensitive searching that we could use, instead of manually writing the SQL for it.</p>
</div>
<pre class="sh_ruby" style="font-size: 53px; margin-top: 60px;"><code>ds = filter(<b>:number.ilike("%#{params['number']}%")</b> &amp;
            <b>:title.ilike("%#{params['title']}%")</b>)

if params['category'].to_i &gt; 0
  ds = ds.select(:forms.<i>*</i>).
          inner_join(:formcategories, :formid=&gt;:id,
            :formcategoryid=&gt;params['category'].to_i)
end

@forms = ds.order(:filename).all
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/47">

<div class="notes">
<p>Since the beginning, Sequel has used a method chaining approach to building queries. We no longer had to worry about modifying the conditions array correctly.</p>
</div>
<pre class="sh_ruby" style="font-size: 53px; margin-top: 60px;"><code>ds = filter(:number.ilike("%#{params['number']}%") &amp;
            :title.ilike("%#{params['title']}%"))

if params['category'].to_i &gt; 0
<b class="block">  ds = ds.select(:forms.<i>*</i>).
          inner_join(:formcategories, :formid=&gt;:id,
            :formcategoryid=&gt;params['category'].to_i)</b>
end

@forms = ds.order(:filename).all
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/48">

<div class="notes">
<p>If you notice, there are actually no SQL code fragments at all. After our switch to Sequel in 2008, only a small amount of code needed to use SQL fragments. As Sequel became more powerful, we stopped needing to use SQL code fragments. We no longer have code that uses SQL fragments or raw SQL at runtime in our web applications. All SQL executed is generated by Sequel.</p>
</div>
<pre class="sh_ruby" style="font-size: 53px; margin-top: 60px;"><code>ds = filter(:number.ilike("%#{params['number']}%") &amp;
            :title.ilike("%#{params['title']}%"))

if params['category'].to_i &gt; 0
  ds = ds.select(:forms.<i>*</i>).
          inner_join(:formcategories, :formid=&gt;:id,
            :formcategoryid=&gt;params['category'].to_i)
end

@forms = ds.order(:filename).all
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/49">

<div class="notes">
<p>In 2008, I learned about Sinatra, and was drawn to Sinatra&#x2019;s much simpler approach to web development. In 2009, we started using Sinatra for all new development, and the initial versions of our recruiting and recommendations systems were written in Sinatra.</p>
</div>

<p><img src="./file/sinatra.gif" style="width: 896px; height: 1050px; position: absolute; top: 15px; left: 525px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/50">

<div class="notes">
<p>In Sinatra, routes are specified directly, with a block to handle the route, and the return value of the block being the response body. I found that Sinatra was much less complex than Rails, while still handling the needs for our recruiting and recommendations systems.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>
get '/report/:report_number/add_recommendation' do
  get_report
  @recommendation = Recommendation.new(:report_id=&gt;@report.id)
  erb :recommendation_form
end
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/51">

<div class="notes">
<p>Another thing I appreciated about Sinatra was the API stablity. In the 5 years we used Sinatra, we never had to modify any of our Sinatra apps due to Sinatra version changes.</p>
</div>

<p><img src="./file/sinatra.gif" style="width: 896px; height: 1050px; position: absolute; top: 15px; left: 525px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/52">

<div class="notes">
<p>That was quite different from our experience with Rails, where every Rails minor version update required application changes, and sometimes even Rails tiny version updates required application changes.</p>
</div>

<p><img src="./file/rails-logo.svg" style="width: 1200px; height: 900px; position: absolute; top: 150px; left: 300px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/53">

<div class="notes">
<p>While Sinatra was simple, in our experience, it was not very DRY. Here is the previous example with the form submission handler added.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>
get '/report/:report_number/add_recommendation' do
  get_report
  @recommendation = Recommendation.new(:report_id=&gt;@report.id)
  erb :recommendation_form
end

post '/report/:report_number/add_recommendation' do
  get_report
  @recommendation = Recommendation.new(:report_id=&gt;@report.id)
  save_recommendation
end
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/54">

<div class="notes">
<p>Because Sinatra considers all routes separately, routes for the different request methods for the same request path repeat the path.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>
get <b>'/report/:report_number/add_recommendation'</b> do
  get_report
  @recommendation = Recommendation.new(:report_id=&gt;@report.id)
  erb :recommendation_form
end

post <b>'/report/:report_number/add_recommendation'</b> do
  get_report
  @recommendation = Recommendation.new(:report_id=&gt;@report.id)
  save_recommendation
end
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/55">

<div class="notes">
<p>In most cases, code inside the route handlers was also duplicated. Some cases where it was not duplicated turned out to be bugs.|Sinatra did eventually add support for deduplicating the logic via before filters, but that resulted in the same issues as using before filters in Rails, making the code harder to understand by making important logic no longer local to the route handler.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>
get '/report/:report_number/add_recommendation' do
<b class="block">  get_report
  @recommendation = Recommendation.new(:report_id=&gt;@report.id)</b>
  erb :recommendation_form
end

post '/report/:report_number/add_recommendation' do
<b class="block">  get_report
  @recommendation = Recommendation.new(:report_id=&gt;@report.id)</b>
  save_recommendation
end
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/56">

<div class="notes">
<p>Another issue with Sinatra is that it lacked support for handling email, having no equivalent for ActionMailer in Rails. So email handling in our Sinatra applications was ad hoc and quite messy, often just inlined directly into the route handling blocks.</p>
</div>

<p><img src="./file/sinatra.gif" style="width: 896px; height: 1050px; position: absolute; top: 15px; left: 525px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/57">

<div class="notes">
<p>In 2014, I was exposed to the routing approach used by Cuba, and saw how it addressed the complexity issues we were having in our Sinatra applications while still being much simpler than Rails.</p>
</div>

<p><img src="./file/cuba.svg" style="width: 900px; height: 437px; position: absolute; top: 240px; left: 510px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/58">

<div class="notes">
<p>With Cuba, routes are handled in a nested fashion, which naturally DRYs up code while still keeping the route handling localized. This resulted in significantly easier to understand code.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>on 'report/:report_number' do |number|
  get_report(number)

  is 'add_recommendation' do
    @recommendation = Recommendation.new(:report_id=&gt;@report.id)

    get do
      res.write view('recommendation_form')
    end

    post do
      save_recommendation
    end
  end
end
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/59">

<div class="notes">
<p>The path itself might be broken up to handle routing different levels of the path, but no part of the path is repeated.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>on <b>'report/:report_number'</b> do |number|
  get_report(number)

  is <b>'add_recommendation'</b> do
    @recommendation = Recommendation.new(:report_id=&gt;@report.id)

    get do
      res.write view('recommendation_form')
    end

    post do
      save_recommendation
    end
  end
end
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/60">

<div class="notes">
<p>Likewise, code used in handling the request may be separated, but the logic is not duplicated. Cuba&#x2019;s approach still makes it simple to see how a specific route will be handled.</p>
</div>
<pre class="sh_ruby" style="font-size: 48px; margin-top: 60px;"><code>on 'report/:report_number' do |number|
  <b>get_report(number)</b>

  is 'add_recommendation' do
    <b>@recommendation = Recommendation.new(:report_id=&gt;@report.id)</b>

    get do
      res.write view('recommendation_form')
    end

    post do
      save_recommendation
    end
  end
end
</code></pre></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/61">

<div class="notes">
<p>While I loved the nested routing aspect of Cuba, I found some of Sinatra&#x2019;s behavior friendlier, such as route blocks returning the response body. I also wanted the ability to easily extend the behavior using plugins, which is one of the best aspects of using Sequel.</p>
</div>

<p><img src="./file/cuba.svg" style="width: 900px; height: 437px; position: absolute; top: 240px; left: 510px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/62">

<div class="notes">
<p>I ended up creating a fork of Cuba called Roda, integrating ideas from Sinatra and Sequel. I converted all of our web applications to Roda in the summer of 2014.|I did have to keep ActionMailer around for a couple months after that in one application, until Roda shipped with a mailer plugin. Roda&#x2019;s mailer plugin offers functionality similar to ActionMailer, and allowed us to unify the email handling in all of our applications. Roda&#x2019;s mailer plugin routes requests to send mail similar to how Roda itself routes web requests, and we found our email handling code was significantly simpler using Roda&#x2019;s mailer plugin compared to using ActionMailer.</p>
</div>

<p><img src="./file/roda-logo.svg" style="width: 1350px; height: 437px; position: absolute; top: 300px; left: 300px;"/>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/63">

<div class="notes">
<p>One thing that became apparent after the upgrade to Roda was that our web applications were noticeably faster.</p>
</div>
<h1 class="blue" style="font-size: 180px; position: absolute; top: 488px; left: 375px;">Performance</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/64">

<div class="notes">
<p>This was especially apparent when running tests. With the exact same set of capybara tests, tests were twice as fast using Roda compared to using Rails.</p>
</div>
<h1 class="red" style="font-size: 180px; position: absolute; top: 330px; left: 225px;">Testing</h1><h1 class="blue" style="font-size: 180px; position: absolute; top: 488px; left: 375px;">Performance</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/65">

<div class="notes">
<p>Before our upgrade to Roda, our newer applications were running on Sinatra, and our older applications were running on Rails. Switching between the two required some cognative overhead. Starting with the upgrade to Roda, all of our applications run using the same set of libraries, and use the same library versions. This makes it much easier to switch between applications during development.</p>
</div>
<h1 class="red" style="font-size: 135px; position: absolute; top: 368px; left: 615px;">Same</h1><h1 class="blue" style="font-size: 315px; position: absolute; top: 375px; left: 345px;">Stack</h1><h1 class="red" style="font-size: 180px; position: absolute; top: 645px; left: 525px;">for All Apps</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/66">

<div class="notes">
<p>This is possible because Sequel&#x2019;s and Roda&#x2019;s plugin architecture allow for what I call complexity scaling. You can easily use Roda and Sequel with a few plugins to handle a small application without being overwhelmed. However, you can keep the same basic architecture and add plugins as needed to scale the application to hundreds or thousands of routes, without having to switch libraries.|This is difficult to do with Sinatra or Rails. Sinatra is not suited to large applications due to its routing architecture, and Rails is not suited to small applications due to its overhead and complexity.</p>
</div>
<h1 class="blue" style="font-size: 315px; position: absolute; top: 225px; left: 120px;">Complexity</h1><h1 class="red" style="font-size: 180px; position: absolute; top: 510px; left: 615px;">Scaling</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/67">

<div class="notes">
<p>As I am the department&#x2019;s Information Security Officer, one focus area for me is security. As you would expect, we try to protect against the common vulnerabilities in web applications.</p>
</div>
<h1 class="blue" style="font-size: 240px; position: absolute; top: 338px; left: 675px;">Focus</h1><h1 class="red" style="font-size: 150px; position: absolute; top: 510px; left: 825px;">on</h1><h1 class="blue" style="font-size: 240px; position: absolute; top: 570px; left: 675px;">Security</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/68">

<div class="notes">
<p>We attempt to mitigate cross site scripting by automatically escaping output in templates using Roda and Erubi, similar to Rails&#x2019; automatic escaping. This was something we were unable to do with Sinatra.</p>
</div>
<h1 class="blue" style="font-size: 240px; position: absolute; top: 38px; left: 375px;">Cross</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 240px; left: 375px;">Site</h1><h1 class="blue" style="font-size: 240px; position: absolute; top: 435px; left: 375px;">Scripting</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/69">

<div class="notes">
<p>We protect against cross site request forgery using Roda&#x2019;s route_csrf plugin, and enforce the use of form-specific CSRF tokens. This goes further than Rails&#x2019;s CSRF protection, which allows generic CSRF tokens even when form-specific CSRF tokens are enabled.|Sinatra does not include CSRF protection. You can use rack_csrf, but that does not offer support for form-specific CSRF tokens.</p>
</div>
<h1 class="blue" style="font-size: 240px; position: absolute; top: 38px; left: 375px;">Cross</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 240px; left: 375px;">Site</h1><h1 class="blue" style="font-size: 240px; position: absolute; top: 435px; left: 375px;">Request</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 630px; left: 375px;">Forgery</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/70">

<div class="notes">
<p>Many security vulnerabilities in Ruby web applications stem from unexpected parameter types being submitted by an attacker. We protect against unexpected parameter types by using Roda&#x2019;s typecast params plugin and Sequel&#x2019;s type conversion to ensure that all parameter inputs are of the expected type.|This is something I think is lacking a good equivalent in both Sinatra and Rails. Rails has strong parameters, but not strong enough to say what type each parameter is expected to be.</p>
</div>
<h1 class="blue" style="font-size: 240px; position: absolute; top: 188px; left: 375px;">Parameter</h1><h1 class="red" style="font-size: 240px; position: absolute; top: 390px; left: 480px;">Types</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/71">

<div class="notes">
<p>Most of our web applications are used both by trusted staff and by untrusted users from the Internet. Our security strategy uses different web application processes to serve these users. The different processes use separate operating system and database users with reduced permissions and capabilities. This way an outside attacker cannot use a vulnerability in one of our web applications to perform actions only one of our staff should be able to perform.|We started doing this when we used Sinatra, and our usage of this has increased after our upgrade to Roda. This approach is difficult when using Rails unless you want to have separate application directories with no shared code.</p>
</div>
<h1 class="blue" style="font-size: 180px; position: absolute; top: 38px; left: 225px;">Separate</h1><h1 class="red" style="font-size: 300px; position: absolute; top: 180px; left: 225px;">Application</h1><h1 class="blue" style="font-size: 300px; position: absolute; top: 435px; left: 225px;">Processes</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none">
  <div class="content " ref="slides/slides/72">

<div class="notes">
<p>Our department has now been using Sequel for over 11 years and Roda for over 5 years. The combination of the two has made web development productive and fun. Here are a few main advantages we have experienced using Sequel and Roda.</p>
</div>

<p><img src="./file/ruby-sequel.png" style="width: 600px; height: 225px; position: absolute; top: 240px; left: 405px;"/>

<p><img src="./file/roda-logo.svg" style="width: 600px; height: 210px; position: absolute; top: 600px; left: 750px;"/>
</p>
</p>
</div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/73">

<div class="notes">
<p>I think Roda and Sequel are easier to understand and therefore easier to learn. I am now the manager of the department&#x2019;s IT unit, and I no longer handle most of the day-to-day programming on our web applications.|The day-to-day updating and adding features to the applications is now handled by another programmer. This programmer had no professional programming experience and had never programmed in Ruby before we hired her. She was able to quickly become productive and implement new features using Sequel and Roda. If we were using Rails, I think it would have taken her significantly longer to become productive.</p>
</div>
<h1 class="blue" style="font-size: 180px; position: absolute; top: 68px; left: 765px;">Easier</h1><h1 class="red" style="font-size: 135px; position: absolute; top: 210px; left: 945px;">to</h1><h1 class="blue" style="font-size: 300px; position: absolute; top: 225px; left: 825px;">Learn</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/74">

<div class="notes">
<p>We&#x2019;ve found that applications converted from Rails to Sequel and Roda have been easier to maintain. Other than major version updates to Sequel and Roda, we have not had to make backwards compatibility changes. The backwards compatibility changes we have had to make in major updates have been smaller compared to similar changes in Rails versions. Part of the reason for this is that Sequel and Roda have offered plugins implementing new behavior before that behavior becomes the default, allowing for more gradual updates.|Our applications using Sequel and Roda total over one hundred thousand lines of Ruby code, and we maintain and add new features on a regular basis using the equivalent of one and a half positions. As a manager, I think that is remarkably efficient.</p>
</div>
<h1 class="blue" style="font-size: 180px; position: absolute; top: 68px; left: 765px;">Easier</h1><h1 class="red" style="font-size: 135px; position: absolute; top: 210px; left: 945px;">to</h1><h1 class="blue" style="font-size: 300px; position: absolute; top: 225px; left: 630px;">Maintain</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none"><div class="content " ref="slides/slides/75">

<div class="notes">
<p>We have found that Sequel and Roda are signficiantly faster than Rails. Faster performance when serving requests and running tests, and more importantly faster development time to implement new features and make desired changes.</p>
</div>
<h1 class="blue" style="font-size: 480px; position: absolute; top: 218px; left: 165px;">Faster</h1></div>
</div><div id="slides/slides" class="slide " data-transition="none">
  <div class="content " ref="slides/slides/76">

<div class="notes">
<p>If you have not tried out Sequel or Roda yet, I encourage you to experiment with them and see if you also experience the same benefits that we have experienced.</p>
</div>

<p><img src="./file/ruby-sequel.png" style="width: 600px; height: 225px; position: absolute; top: 240px; left: 405px;"/>

<p><img src="./file/roda-logo.svg" style="width: 600px; height: 210px; position: absolute; top: 600px; left: 750px;"/>
</p>
</p>
</div>
</div><div id="slides/slides" class="slide bg-thankyou" data-transition="none"><div class="content bg-thankyou" ref="slides/slides/77">

<div class="notes">
<p>That concludes my presentation. I would like to thank all of you for listening to me.</p>
</div>
</div>
</div><div id="slides/slides" class="slide bg-questions" data-transition="none"><div class="content bg-questions" ref="slides/slides/78">

<div class="notes">
<p>I have about five minutes for questions, so if you have any questions, please ask them now. Merci beaucoup! (Thank you very much)</p>
</div>
</div>
</div><div id="slides/slides" class="slide credits" data-transition="none"><div class="content credits" ref="slides/slides/79">

<div class="notes">
<p>Photo credits</p>
</div>
<h1 style="text-align: center">Photo Credits</h1>
<p>State Capitol: Jeffery Turner</p>

<p>Software/Organization Logos: Respective Organizations</p>

<p>Thank You: rawpixel.com</p>

<p>Questions: Nick Youngson</p>
</div>
</div>
</div>

</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>
  <meta HTTP-EQUIV=CONTENT-TYPE CONTENT="text/html; charset=utf-8">
  <title>Slide 105</title>
</head>
<body>
<center>
<a href="text0.html">First page</a> <a href="text103.html">Back</a> <a href="text105.html">Continue</a> <a href="text105.html">Last page</a> <a href="mwrc2010.html">Overview</a> <a href="img104.html">Graphics</a></center><br>
<h1 style="direction:ltr;"></h1>
<br>
<h3>Notes:</h3>
<p style="direction:ltr;">(3 secs) The solution to this is fairly simple.</p>
<p style="direction:ltr;"></p>
<p style="direction:ltr;">You just need to make sure that all code that must be executed is inside an ensure block.</p>
<p style="direction:ltr;"></p>
<p style="direction:ltr;">I think the original author of this code didn't want the commit query to be sent in case of an error, which is why it wasn't in the ensure block to begin with.</p>
<p style="direction:ltr;"></p>
<p style="direction:ltr;">If you only want code to be executed if no exception was raised, you should have the rescue block assign the exception to a local variable, and then inside the ensure block, only execute the code if that variable is nil.</p>
</body>
</html>